package ru.kirill.foxgame.model;


import ru.kirill.foxgame.logic.FoxGame;


/**
 * Представляет особые эффекты, которые могут иметь карты в игре "Лисица на опушке".
 * Только нечетные карты (достоинства 1, 3, 5, 7, 9, 11) обладают эффектами.
 * Эффекты применяются в момент разыгрывания карты и могут влиять на ход игры,
 * включая смену козыря, изменение правил круга или взаимодействие с картами соперника.
 * 
 * @see Card#isOdd()
 * @see FoxGame#applyCardEffect(Card, Player)
 */
public enum CardEffect {
    /**
     * Отсутствие эффекта. Используется для четных карт (2, 4, 6, 8, 10),
     * которые не обладают особыми свойствами.
     */
    NONE("Нет эффекта"),

    /**
     * Эффект карты "Лебедь" (достоинство 1).
     * Особое правило: если оба игрока сыграли карты достоинством 1 в одном круге,
     * то следующим ведущим становится проигравший текущий круг.
     * В остальных случаях действует стандартное правило - победитель круга становится ведущим.
     * 
     * @see Rank#ONE
     */
    SWAN("Лебедь: меняет следующего ведущего"),
    
    /**
     * Эффект карты "Лиса" (достоинство 3).
     * При разыгрывании этой карты игрок может изменить козырную масть.
     * Новая козырная масть становится равной масти сыгранной карты.
     * Эффект применяется немедленно и влияет на определение победителя текущего круга.
     * 
     * @see Rank#THREE
     * @see FoxGame#applyFoxEffect(Card, Player)
     */
    FOX("Лиса: меняет козырь"),
    
    /**
     * Эффект карты "Дровосек" (достоинство 5).
     * При разыгрывании этой карты соперник должен сбросить случайную карту из своей руки.
     * Сброшенная карта удаляется из игры и не участвует в дальнейших кругах.
     * Эффект применяется до того, как соперник ответит на ход.
     * 
     * @see Rank#FIVE
     * @see FoxGame#applyWoodcutterEffect(Card, Player)
     */
    WOODCUTTER("Дровосек: сбрасывает карту соперника"),
    
    /**
     * Эффект карты "Ведьма" (достоинство 9).
     * Особое правило: если в круге сыграна только одна карта "Ведьма" (9),
     * то она становится козырем независимо от своей масти.
     * Если в круге сыграны две карты "Ведьма", эффект нейтрализуется.
     * Эффект применяется при определении победителя круга.
     * 
     * @see Rank#NINE
     * @see FoxGame#applyWitchEffect(Card, Player)
     */
    WITCH("Ведьма: становится козырем"),
    
    /**
     * Эффект карты "Страж" (достоинство 7).
     * Блокирует эффекты других особых карт в текущем круге.
     * Если "Страж" сыгран отвечающим игроком, он блокирует эффект карты ведущего.
     * Эффект применяется немедленно после разыгрывания карты.
     * 
     * @see Rank#SEVEN
     * @see FoxGame#applyGuardEffect(Card, Player)
     */
    GUARD("Страж: блокирует эффекты"),
    
    /**
     * Эффект карты "Лунатик" (достоинство 11).
     * Заставляет игроков обменяться случайными картами из своих рук.
     * Количество обмениваемых карт определяется реализацией (обычно 1-3 карты).
     * Эффект применяется только когда карту разыгрывает ведущий игрок.
     * 
     * @see Rank#ELEVEN
     * @see FoxGame#applyLunaticEffect(Card, Player)
     */
    LUNATIC("Лунатик: специальный эффект");
    
    private final String description;
    
    /**
     * Создает элемент перечисления CardEffect с описанием на русском языке.
     * 
     * @param description текстовое описание эффекта на русском языке,
     *                    используемое для отображения в пользовательском интерфейсе
     */
    CardEffect(String description) {
        this.description = description;
    }
    
    /**
     * Возвращает текстовое описание эффекта карты на русском языке.
     * 
     * @return строковое описание эффекта, подходящее для отображения пользователю
     */
    @Override
    public String toString() {
        return description;
    }
    
    /**
     * Возвращает эффект карты для указанного достоинства.
     * Метод определяет, какой особый эффект (если есть) соответствует
     * карте данного достоинства.
     * 
     * @param rank достоинство карты, для которого нужно определить эффект.
     *             Допустимые значения: любые элементы перечисления {@link Rank}.
     * @return соответствующий эффект карты. Для нечетных достоинств (1, 3, 5, 7, 9, 11)
     *         возвращается соответствующий эффект, для четных достоинств возвращается
     *         {@link #NONE}.
     *         
     * @throws NullPointerException если параметр {@code rank} равен {@code null}
     *         
     * @see Rank
     * @see #NONE
     */
    public static CardEffect getEffectForRank(Rank rank) {
        switch (rank) {
            case ONE: return SWAN;
            case THREE: return FOX;
            case FIVE: return WOODCUTTER;
            case SEVEN: return GUARD;
            case NINE: return WITCH;
            case ELEVEN: return LUNATIC;
            default: return NONE;
        }
    }
}
